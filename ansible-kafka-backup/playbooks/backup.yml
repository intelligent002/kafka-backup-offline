---
- name: Manage cluster backup
  hosts: all
  become: yes

  pre_tasks:
    - name: Cleanup temporary files before execution
      tags:
        - config_backup
        - data_backup
        - config_restore
        - data_restore
      include_tasks: ../roles/common/cleanup.yml

  roles:
    - role: ../roles/prerequisites  # Ensure prerequisites are installed
    - role: ../roles/ssh  # Include SSH-related tasks
    - role: ../roles/docker  # Include Docker-related tasks
    - role: ../roles/backup  # Include Backup and Restore tasks

  post_tasks:
    - name: Cleanup temporary files after execution
      tags:
        - config_backup
        - data_backup
        - config_restore
        - data_restore
      include_tasks: ../roles/common/cleanup.yml