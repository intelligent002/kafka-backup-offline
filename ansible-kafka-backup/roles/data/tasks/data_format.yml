---
- name: Validate containers status
  tags:
    - data_format
  include_tasks: ../../docker/tasks/containers_validation.yml

- name: Remove cluster data folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_data_path }}"
    state: absent

- name: Create cluster data folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_data_path }}"
    state: directory
    mode: "{{ chmod_data }}"
    owner: "{{ owner_user_data }}"
    group: "{{ owner_group_data }}"

- name: Remove cluster logs folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_logs_path }}"
    state: absent

- name: Create cluster logs folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_logs_path }}"
    state: directory
    mode: "{{ chmod_data }}"
    owner: "{{ owner_user_data }}"
    group: "{{ owner_group_data }}"

- name: Format cluster data folder on nodes
  tags:
    - data_format
  shell: "{{ docker_command_data_format }}"
