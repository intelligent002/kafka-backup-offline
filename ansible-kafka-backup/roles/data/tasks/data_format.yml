---
- name: Remove cluster data folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_data }}"
    state: absent

- name: Create cluster data folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_data }}"
    state: directory
    mode: '{{ data_folder_chmod }}'
    owner: '{{ data_owner_user }}'
    group: '{{ data_owner_group }}'

- name: Remove cluster logs folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_logs }}"
    state: absent

- name: Create cluster logs folder on nodes
  tags:
    - data_format
  file:
    path: "{{ node_logs }}"
    state: directory
    mode: '{{ data_folder_chmod }}'
    owner: '{{ data_owner_user }}'
    group: '{{ data_owner_group }}'

- name: Format cluster data folder on nodes
  tags:
    - data_format
  shell: "{{ docker_command_data_format }}"
  with_items: "{{ startup_order }}"
  when: inventory_hostname == item
