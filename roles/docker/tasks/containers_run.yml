---
- name: Request RAM size on each node
  tags:
    - containers_run
  delegate_to: "{{ item }}"
  shell: "awk '/MemTotal/ {print $2}' /proc/meminfo"
  register: ram_output
  with_items: "{{ startup_order }}"

- name: Parse RAM size responses
  tags:
    - containers_run
  debug:
    msg: "{{ item.item }} -> Total RAM: {{ (item.stdout | int / 1024) | round | int }} MB"
  with_items: "{{ ram_output.results }}"
  loop_control:
    label: "{{ item.item }}"
  run_once: true
  delegate_to: localhost
